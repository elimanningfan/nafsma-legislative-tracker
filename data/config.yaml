# NAFSMA Legislative Tracker Configuration

notifications:
  email_recipients:
    - jon@nafsma.org
  from_email: jon@nafsma.org

congress:
  api_base: "https://api.congress.gov/v3"
  current_congress: 119

  # Bill searches to run
  searches:
    - name: "WRDA"
      query: "water resources development"
    - name: "NFIP"
      query: "flood insurance"
    - name: "Clean Water"
      query: "clean water act"
    - name: "FEMA"
      query: "FEMA emergency management"
    - name: "Stormwater"
      query: "stormwater"
    - name: "Appropriations - USACE"
      query: "army corps engineers appropriations"

  # Keywords that indicate high relevance (used for priority scoring)
  priority_keywords:
    critical:
      - "WRDA"
      - "water resources development act"
      - "NFIP"
      - "national flood insurance"
      - "flood insurance program"
      - "levee safety"
      - "section 408"
    high:
      - "FEMA"
      - "USACE"
      - "Army Corps"
      - "flood control"
      - "flood risk"
      - "stormwater"
      - "MS4"
      - "NPDES"
      - "clean water act"
      - "BRIC"
      - "hazard mitigation"
      - "WIFIA"

  # Subject-based filtering (more reliable than text search)
  # These are CRS-assigned policy areas and subject terms
  relevant_policy_areas:
    - "Water resources development"
    - "Emergency management"
    - "Environmental protection"
    - "Public lands and natural resources"
    - "Transportation and public works"

  relevant_subjects:
    - "Floods and storm protection"
    - "Flood control"
    - "Water use and supply"
    - "Water storage"
    - "Water quality"
    - "Stormwater"
    - "Natural disasters"
    - "Disaster relief and insurance"
    - "Emergency planning and evacuation"
    - "Hydrology and hydrography"
    - "Levees"
    - "Dams"
    - "Wetlands"
    - "Lakes and rivers"
    - "Marine and coastal resources, fisheries"
    - "Water resources funding"
    - "Watersheds"

  # Title keywords for first-pass filtering (before fetching subjects)
  title_keywords:
    - "flood"
    - "water"
    - "storm"
    - "FEMA"
    - "levee"
    - "dam"
    - "drainage"
    - "infrastructure"
    - "resilience"
    - "disaster"
    - "emergency"
    - "corps"
    - "USACE"
    - "EPA"
    - "wetland"
    - "coastal"
    - "watershed"
    - "river"
    - "lake"

federal_register:
  api_base: "https://www.federalregister.gov/api/v1"

  # Agencies to monitor
  agencies:
    - slug: "federal-emergency-management-agency"
      name: "FEMA"
    - slug: "environmental-protection-agency"
      name: "EPA"
    - slug: "engineers-corps"
      name: "USACE"

  # Document types to track
  document_types:
    - "Proposed Rule"
    - "Rule"
    - "Notice"

  # Days warning for comment periods
  comment_warning_days: 7

committees:
  # Congress.gov API committee meeting tracking (replaces broken RSS feeds)
  # Codes use Congress.gov systemCode format: lowercase + numeric suffix
  # 00 = full committee, other numbers = subcommittees
  tracked_committees:
    # House Transportation & Infrastructure (WRDA jurisdiction)
    - code: "hspw00"
      name: "House Transportation & Infrastructure"
      chamber: "house"
      priority: critical
    - code: "hspw02"
      name: "House T&I - Water Resources"
      chamber: "house"
      priority: critical
    - code: "hspw13"
      name: "House T&I - Emergency Management"
      chamber: "house"
      priority: high
    # Senate Environment & Public Works (WRDA jurisdiction)
    - code: "ssev00"
      name: "Senate Environment & Public Works"
      chamber: "senate"
      priority: critical
    - code: "ssev15"
      name: "Senate EPW - Fisheries, Wildlife, and Water"
      chamber: "senate"
      priority: high
    # Appropriations (agency funding)
    - code: "hsap00"
      name: "House Appropriations"
      chamber: "house"
      priority: high
    - code: "hsap10"
      name: "House Appropriations - Energy & Water"
      chamber: "house"
      priority: critical
    - code: "ssap00"
      name: "Senate Appropriations"
      chamber: "senate"
      priority: high
    - code: "ssap22"
      name: "Senate Appropriations - Energy & Water"
      chamber: "senate"
      priority: critical
    # Senate Banking (NFIP jurisdiction)
    - code: "ssbk00"
      name: "Senate Banking"
      chamber: "senate"
      priority: high

  # Days to look back for recent committee meetings
  meetings_days_back: 30

  # Congressional committee RSS feeds to monitor (legacy - some may be broken)
  # Note: Committee RSS feeds may be unreliable or return malformed XML.
  # The system handles this gracefully - if feeds fail, they are skipped.
  # You can add/remove feeds as needed. Feeds are filtered by keywords.
  rss_feeds:
    - name: "House T&I"
      url: "https://transportation.house.gov/news/documentquery.aspx?DocumentTypeID=2545&rss=true"
      keywords:
        - "water"
        - "WRDA"
        - "FEMA"
        - "flood"
        - "infrastructure"
        - "Corps"
        - "levee"
        - "dam"
        - "stormwater"

    - name: "Senate EPW"
      url: "https://www.epw.senate.gov/public/index.cfm/rss/feed"
      keywords:
        - "water"
        - "WRDA"
        - "infrastructure"
        - "EPA"
        - "flood"
        - "clean water"
        - "stormwater"
        - "FEMA"

    # Congress.gov Most Viewed Bills - a working alternative
    - name: "Congress.gov Most Viewed"
      url: "https://www.congress.gov/rss/most-viewed-bills.xml"
      keywords:
        - "water"
        - "flood"
        - "FEMA"
        - "infrastructure"
        - "disaster"
        - "emergency"
        - "EPA"
        - "Corps"

    # USACE News Releases - agency news
    - name: "USACE News"
      url: "https://www.usace.army.mil/DesktopModules/ArticleCS/RSS.ashx?ContentType=7&Site=1&max=20"
      keywords:
        - "flood"
        - "levee"
        - "dam"
        - "water"
        - "infrastructure"
        - "navigation"
        - "WRDA"
        - "disaster"
        - "hurricane"
        - "storm"

openfema:
  # OpenFEMA API settings (no API key required)
  api_base: "https://www.fema.gov/api/open/v2"

  # Days to look back for disaster declarations
  # Note: Use 60+ days to capture recent declarations (FEMA declares in batches)
  days_back: 60

  # Incident types relevant to NAFSMA
  # Filters disaster declarations to flood/storm related
  relevant_incident_types:
    - "Flood"
    - "Severe Storm"
    - "Severe Storm(s)"
    - "Hurricane"
    - "Coastal Storm"
    - "Typhoon"
    - "Dam/Levee Break"
    - "Tornado"
    - "Mud/Landslide"
